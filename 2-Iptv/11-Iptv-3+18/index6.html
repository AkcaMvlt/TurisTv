<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>IPTV — Hamburger Categorie Menu (Overlay)</title>
  <style>
    :root{--bg:#071226;--card:#0f1724;--muted:#9fb3c8;--accent:#06b6d4;--glass:rgba(255,255,255,0.03);--accent-dark:#05323a}
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter, 'Poppins', system-ui, -apple-system, 'Segoe UI', Roboto, Arial;color:#e6eef6;background:linear-gradient(180deg,#061225 0%,#000612 100%)}

    /* App layout: single column (mobile-first) */
    .app{display:flex;flex-direction:column;height:100vh;overflow:hidden}
    .topbar{display:flex;align-items:center;gap:12px;padding:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));}
    .hambtn{width:44px;height:44px;border-radius:10px;background:var(--glass);display:flex;align-items:center;justify-content:center;cursor:pointer;border:1px solid rgba(255,255,255,0.02)}
    .hambtn svg{width:22px;height:22px;stroke:var(--accent);stroke-width:1.8}
    .app-title{font-weight:700;font-size:1.05rem}

    /* Player area */
    .player-wrap{flex:0 0 auto;padding:12px}
    .player-card{border-radius:12px;overflow:hidden;background:#000;min-height:220px;box-shadow:0 12px 40px rgba(2,6,23,0.6)}
    video{width:100%;height:100%;max-height:56vh;background:#000;display:block}
    .player-info{display:flex;justify-content:space-between;align-items:center;padding:8px 10px;background:linear-gradient(180deg, rgba(0,0,0,0.45), transparent)}
    .now{font-size:0.95rem;color:var(--muted)}
    .state{font-size:0.85rem;color:var(--muted)}

    /* Playlist area */
    .playlist-wrap{flex:1 1 auto;overflow:auto;padding:12px}
    .playlist-card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;padding:12px;min-height:180px}
    .playlist-title{display:flex;align-items:center;gap:8px;margin-bottom:8px}
    .playlist-title h3{margin:0}
    .playlist{display:flex;flex-direction:column;gap:8px;max-height:60vh;overflow:auto;padding-right:6px}
    .playlist::-webkit-scrollbar{width:8px}
    .playlist::-webkit-scrollbar-thumb{background:linear-gradient(180deg,var(--accent),#08a7b0);border-radius:10px}
    .channel-item{display:flex;justify-content:space-between;align-items:center;padding:10px;border-radius:10px;background:rgba(255,255,255,0.02);cursor:pointer}
    .channel-item:hover{background:rgba(255,255,255,0.04)}
    .channel-item.active{background:linear-gradient(90deg,var(--accent),#08a7b0);color:#062026;font-weight:700}

    /* Overlay menu (hamburger) sliding from left */
    .overlay{position:fixed;top:0;left:0;bottom:0;width:320px;max-width:86vw;background:linear-gradient(180deg,#021525 0%,#042131 100%);box-shadow:12px 0 40px rgba(0,0,0,0.6);transform:translateX(-110%);transition:transform .28s cubic-bezier(.2,.9,.3,1);z-index:60;padding:18px;overflow:auto}
    .overlay.open{transform:translateX(0)}
    .overlay h2{margin:6px 0 12px 0;color:var(--accent)}
    .overlay .cat-list{display:flex;flex-direction:column;gap:8px}
    .overlay .cat-btn{padding:10px;border-radius:10px;background:rgba(255,255,255,0.02);cursor:pointer;display:flex;justify-content:space-between;align-items:center}
    .overlay .cat-btn:hover{background:rgba(255,255,255,0.04)}
    .overlay .cat-btn.active{background:linear-gradient(90deg,var(--accent),#08a7b0);color:#021725;font-weight:700}

    /* backdrop for overlay */
    .backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.45);opacity:0;pointer-events:none;transition:opacity .2s;z-index:50}
    .backdrop.show{opacity:1;pointer-events:auto}

    @media(min-width:900px){
      .app{padding:18px}
      .overlay{width:360px}
      .player-card{min-height:380px}
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="topbar">
      <div class="hambtn" id="hamburger" title="Categorieën"><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 6h16M4 12h16M4 18h16" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
      <div class="app-title">IPTV Player</div>
      <div style="margin-left:auto;color:var(--muted)">Tik menu en kies categorie</div>
    </div>

    <div class="player-wrap">
      <div class="player-card" id="playerCard">
        <video id="video" controls playsinline></video>
        <div class="player-info">
          <div class="now" id="nowPlaying">Geen stream geselecteerd</div>
          <div class="state" id="playerState">--</div>
        </div>
      </div>
    </div>

    <div class="playlist-wrap">
      <div class="playlist-card">
        <div class="playlist-title"><h3 id="playlistHeader">Alle kanalen</h3><div style="margin-left:auto;color:var(--muted)" id="playlistSub">Tik een kanaal om te spelen</div></div>
        <div class="playlist" id="playlist"></div>
      </div>
    </div>
  </div>

  <!-- Overlay menu -->
  <div class="overlay" id="overlay">
    <h2>Categorieën</h2>
    <div class="cat-list" id="catList"></div>
    <div style="height:18px"></div>
    <div style="color:var(--muted);font-size:0.9rem">Selecteer een categorie om de playlist hieronder te laden.</div>
  </div>
  <div class="backdrop" id="backdrop"></div>

  <script src="https://cdn.jsdelivr.net/npm/hls.js@1.4.2/dist/hls.min.js"></script>
  <script>
    // Example data (vervang met je eigen playlist)
    const CATEGORIES = [
      { id: 'all', title: 'Alle kanalen', channels: [
        { name: 'Nieuws 24', url: 'https://stream.tiviturk.de/live/tiviturk.m3u8?start=LIVE&end=END' },
        { name: 'Sport 1', url: 'http://media.finest.tv/hls/live.m3u8?start=LIVE&end=END' },
        { name: 'Film Kanaal', url: 'https://test-streams.mux.dev/test_001/stream.m3u8' }
      ]},
      { id: 'news', title: 'Nieuws', channels: [
        { name: 'Nieuws 24', url: 'https://live.artidijitalmedya.com/artidijital_tempotv/tempotv/playlist.m3u8?start=LIVE&end=END' },
        { name: 'Nieuws Live', url: 'https://test-streams.mux.dev/test_001/stream.m3u8' }
      ]},
      { id: 'news', title: 'Nieuws', channels: [
        { name: 'Nieuws 24', url: 'https://live.artidijitalmedya.com/artidijital_tempotv/tempotv/playlist.m3u8?start=LIVE&end=END' },
        { name: 'Nieuws Live', url: 'http://livetv.powerapp.com.tr/dance/dance.smil/playlist.m3u8?start=LIVE&end=END' }
      ]},
      { id: 'news', title: 'Nieuws', channels: [
        { name: 'Nieuws 24', url: 'https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8' },
        { name: 'Nieuws Live', url: 'https://test-streams.mux.dev/test_001/stream.m3u8' }
      ]},
      { id: 'sports', title: 'Sport', channels: [
        { name: 'Sport Live', url: 'https://test-streams.mux.dev/playback.sdp/playlist.m3u8' },
        { name: 'Sport Highlights', url: 'https://bitdash-a.akamaihd.net/content/sintel/hls/playlist.m3u8' }
      ]},
      { id: 'movies', title: 'Films', channels: [
        { name: 'Film Kanaal', url: 'https://test-streams.mux.dev/test_001/stream.m3u8' }
      ]}
    ];

    // DOM refs
    const overlay = document.getElementById('overlay');
    const backdrop = document.getElementById('backdrop');
    const hamburger = document.getElementById('hamburger');
    const catList = document.getElementById('catList');
    const playlistEl = document.getElementById('playlist');
    const playlistHeader = document.getElementById('playlistHeader');
    const playlistSub = document.getElementById('playlistSub');
    const nowPlaying = document.getElementById('nowPlaying');
    const playerState = document.getElementById('playerState');
    const video = document.getElementById('video');

    let currentCategoryId = 'all';
    let hls = null;

    // build overlay category buttons
    function renderOverlayCats(){
      catList.innerHTML = '';
      CATEGORIES.forEach(cat => {
        const btn = document.createElement('div');
        btn.className = 'cat-btn';
        btn.dataset.id = cat.id;
        btn.innerHTML = `<div>${cat.title}</div><div style=\"color:var(--muted);font-size:0.95rem\">${cat.channels.length} kan.</div>`;
        btn.addEventListener('click', ()=>{
          // mark active visually
          document.querySelectorAll('.overlay .cat-btn').forEach(b=>b.classList.remove('active'));
          btn.classList.add('active');
          // load playlist for this category
          loadPlaylist(cat.id);
          closeOverlay();
        });
        catList.appendChild(btn);
      });
    }

    function openOverlay(){ overlay.classList.add('open'); backdrop.classList.add('show'); }
    function closeOverlay(){ overlay.classList.remove('open'); backdrop.classList.remove('show'); }

    hamburger.addEventListener('click', openOverlay);
    backdrop.addEventListener('click', closeOverlay);

    // populate playlist under player based on category id
    function loadPlaylist(catId){
      currentCategoryId = catId;
      const cat = CATEGORIES.find(c => c.id === catId) || CATEGORIES[0];
      playlistHeader.textContent = cat.title;
      playlistSub.textContent = `${cat.channels.length} kanalen — tik om te spelen`;

      // clear existing
      playlistEl.innerHTML = '';

      cat.channels.forEach((ch, idx) => {
        const item = document.createElement('div');
        item.className = 'channel-item';
        item.dataset.url = ch.url;
        item.dataset.name = ch.name;
        item.innerHTML = `<div>${idx+1}. ${ch.name}</div><div style=\"font-size:0.85rem;color:var(--muted)\">HLS</div>`;

        item.addEventListener('click', ()=>{
          // remove active class from others
          document.querySelectorAll('.channel-item').forEach(i=>i.classList.remove('active'));
          item.classList.add('active');
          playChannel(ch);
        });

        playlistEl.appendChild(item);
      });

      // auto-scroll playlist to top
      playlistEl.scrollTop = 0;
    }

    // play a channel
    function playChannel(ch){
      if(!ch || !ch.url) return;
      nowPlaying.textContent = ch.name;
      playerState.textContent = 'Laden...';

      try{ if(hls){ hls.destroy(); hls = null; } } catch(e){ console.warn(e) }

      if(video.canPlayType('application/vnd.apple.mpegurl')){
        video.src = ch.url; video.load();
        video.play().then(()=> playerState.textContent = 'Speelt').catch(()=> playerState.textContent = 'Klik play om te starten');
      } else if(Hls.isSupported()){
        hls = new Hls(); hls.loadSource(ch.url); hls.attachMedia(video);
        hls.on(Hls.Events.MANIFEST_PARSED, function() { video.play().then(()=> playerState.textContent = 'Speelt').catch(()=> playerState.textContent = 'Klik play'); });
        hls.on(Hls.Events.ERROR, function(event, data){ console.error('HLS error', data); playerState.textContent = 'Fout bij laden'; });
      } else {
        alert('HLS niet ondersteund in deze browser. Probeer Safari of een moderne browser met hls.js.');
        playerState.textContent = 'Niet ondersteund';
      }

      // on mobile, scroll player into view so user sees video
      document.querySelector('.player-card')?.scrollIntoView({behavior:'smooth', block:'start'});
    }

    // init: render overlay categories and load default category
    renderOverlayCats();
    loadPlaylist('all');

    // keyboard accessibility: close overlay on Escape
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeOverlay(); });

    // expose small API
    window.ipTV = { openOverlay, closeOverlay, loadPlaylist, playChannel };
  </script>
</body>
</html>
