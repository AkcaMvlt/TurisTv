<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Turis TV Playlist</title>
<link rel="icon" href="favicon.ico" sizes="32x32">
<style>
:root{
  --bg:#0a0f1c;
  --card:#12192e;
  --accent:#06b6d4;
  --gap:12px;
  --card-radius:10px;
}
*{box-sizing:border-box;}
body{margin:0;font-family:Arial,Helvetica,sans-serif;background:var(--bg);color:#fff;-webkit-font-smoothing:antialiased;}
header{background:var(--card);padding:12px 16px;display:flex;align-items:center;justify-content:space-between;gap:12px;position:sticky;top:0;z-index:50;}
.brand{display:flex;align-items:center;gap:10px;}
.brand h1{font-size:18px;margin:0;}
.hamburger{background:none;border:none;color:#fff;font-size:26px;cursor:pointer;padding:10px;border-radius:8px;display:flex;align-items:center;justify-content:center;}
.container{display:grid;grid-template-columns:240px 1fr;gap:var(--gap);padding:16px;align-items:start;}
nav{background:var(--card);border-radius:var(--card-radius);padding:12px;min-height:120px;}
nav ul{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:6px;}
nav li{padding:10px;border-radius:8px;cursor:pointer;font-size:14px;user-select:none;}
nav li:hover{background:#1f2a49;}
.movies{display:grid;grid-template-columns:repeat(auto-fill, minmax(160px, 1fr));gap:var(--gap);}
.card{background:var(--card);border-radius:var(--card-radius);overflow:hidden;cursor:pointer;display:flex;flex-direction:column;transition:transform 0.15s;}
.card:hover{transform:translateY(-4px);}
.card img{width:100%;height:auto;aspect-ratio:16/9;object-fit:cover;display:block;}
.card .info{padding:10px;}
.card .info h3{margin:0;font-size:15px;line-height:1.2;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.player{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.9);display:none;align-items:center;justify-content:center;flex-direction:column;z-index:1000;padding:20px;}
.player .media-wrap{width:95%;max-width:1000px;border-radius:12px;display:flex;align-items:center;justify-content:center;}
.player video, .player iframe{width:100%;height:auto;aspect-ratio:16/9;border-radius:10px;max-height:80vh;}
.closeBtn{margin-top:14px;padding:5px 10px;border:none;border-radius:8px;background:var(--accent);color:#000;font-weight:700;cursor:pointer;}
button:focus, nav li:focus {outline:2px solid #06b6d4;outline-offset:3px;}
@media (max-width: 900px){
  .container{grid-template-columns:1fr;padding:12px;gap:10px;}
  nav{position:fixed;top:64px;left:12px;right:12px;z-index:999;display:none;padding:12px;}
  nav.show{display:block;}
  .movies{grid-template-columns:repeat(auto-fill, minmax(140px, 1fr));}
  .card .info h3{font-size:12px;}
  .hamburger{font-size:13px;padding:2px;}
}
@media (max-width:480px){
  header{padding:10px;}
  .movies{grid-template-columns:repeat(2,1fr);gap:8px;}
  .card .info h3{font-size:13px;}
  .closeBtn{padding:10px 14px;}
}
</style>
</head>
<body>

<header>
  <div class="brand"><h1>Turis TV</h1></div>
  <div><button class="hamburger" aria-expanded="false" aria-controls="sideMenu" onclick="toggleMenu()">☰</button></div>
</header>

<div class="container">
  <nav id="sideMenu" aria-hidden="true">
    <ul>
      <li onclick="filterMovies('ulusal');toggleMenu()">Ulusal</li>
      <li onclick="filterMovies('muzik');toggleMenu()">Muzik</li>
      <li onclick="filterMovies('youtube');toggleMenu()">YouTube Playlist</li>
    </ul>
  </nav>

  <main>
    <div class="movies" id="movieGrid"></div>
  </main>
</div>

<div class="player" id="player" role="dialog" aria-modal="true" aria-hidden="true">
  <div class="media-wrap" id="playerContent"></div>
  <button class="closeBtn" onclick="closePlayer()">Kapat ✖</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script>
const movies = [
  {title:"FiNEST TV", cover:"https://od.lk/s/NzJfNDc2NzIzNzBf/BosY.png?random=1", category:"muzik", url:"http://media.finest.tv/hls/live.m3u8"},
  {title:"TRT 1", cover:"https://od.lk/s/NzJfNDc2NjczNTdf/bos.png?random=1", category:"ulusal", url:"https://tv-trt1.medya.trt.com.tr/master.m3u8"},
  {title:"CNN TÜRK", cover:"https://od.lk/s/NzJfNDc2Nzg4ODlf/nbnrz.png", category:"youtube", url:"https://www.youtube.com/watch?v=6N8_r2uwLEc"}
];

const grid = document.getElementById('movieGrid');
const player = document.getElementById('player');
const playerContent = document.getElementById('playerContent');
const sideMenu = document.getElementById('sideMenu');
const hamburger = document.querySelector('.hamburger');
let hls;
let currentIndex = 0;

function renderMovies(list){
  grid.innerHTML='';
  list.forEach((m,i)=>{
    const div = document.createElement('div');
    div.className='card';
    div.innerHTML=`<img src="${m.cover}" alt="${m.title}"><div class="info"><h3>${m.title}</h3></div>`;
    div.onclick = ()=> { currentIndex=i; openPlayer(m); };
    grid.appendChild(div);
  });
}

function filterMovies(cat){
  if(cat==='all') renderMovies(movies);
  else renderMovies(movies.filter(m=>m.category===cat));
}

function openPlayer(movie){
  playerContent.innerHTML='';
  if(movie.url.includes('youtube.com') || movie.url.includes('youtu.be')){
    const iframe = document.createElement('iframe');
    let videoID = movie.url.split('v=')[1] || movie.url.split('youtu.be/')[1];
    if(videoID) videoID = videoID.split('&')[0];
    iframe.src = `https://www.youtube.com/embed/${videoID}?autoplay=1&rel=0`;
    iframe.allow = "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture";
    iframe.allowFullscreen = true;
    playerContent.appendChild(iframe);
  } else {
    const video = document.createElement('video');
    video.controls = true;
    video.autoplay = true;
    video.playsInline = true;
    if(Hls.isSupported()){
      hls = new Hls();
      hls.loadSource(movie.url);
      hls.attachMedia(video);
      hls.on(Hls.Events.MANIFEST_PARSED, ()=> video.play());
      video.addEventListener('ended', playNext);
    } else if(video.canPlayType('application/vnd.apple.mpegurl')){
      video.src = movie.url;
      video.addEventListener('ended', playNext);
    } else {
      video.innerHTML = "Stream wordt niet ondersteund.";
    }
    playerContent.appendChild(video);
  }
  player.style.display='flex';
  player.setAttribute('aria-hidden','false');
}

function playNext(){
  currentIndex++;
  if(currentIndex>=movies.length) currentIndex=0;
  openPlayer(movies[currentIndex]);
}

function closePlayer(){
  if(hls){ hls.destroy(); hls=null; }
  playerContent.innerHTML='';
  player.style.display='none';
  player.setAttribute('aria-hidden','true');
}

function toggleMenu(){
  sideMenu.classList.toggle('show');
  const expanded = hamburger.getAttribute('aria-expanded')==='true';
  hamburger.setAttribute('aria-expanded',!expanded);
  sideMenu.setAttribute('aria-hidden', expanded);
}

// Initial render
renderMovies(movies);
</script>

</body>
</html>
